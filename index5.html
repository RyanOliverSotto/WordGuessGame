<!DOCTYPE html>
<html lang="en">

<head>
    <title>Word Guessing Game</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
        crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Faster+One|Rubik+Mono+One" rel="stylesheet">
    <!--Specify in CSS
Use the following CSS rules to specify these families
font-family: 'Rubik Mono One', sans-serif;
font-family: 'Faster One', cursive;-->
</head>
<style>
    .content {
        background-clip: white;
    }

    .jumbotron h1 {
        font-family: 'Faster One', cursive;
        font-size: 75px;
        background-color: burlywood;
        text-align: center
    }
    .jumbotron{
        background-image: url("https://lh3.googleusercontent.com/WBC176q6xP_8KUcUTGZQfT9_7SPalOMjZH4QigUM3VGR-GJsvCI-v2o_KSzApzN9jz2_=s85");
    }
    .gamecontent {
        font-family: 'Rubik Mono One', sans-serif;
    }

    .bodycontent {
        font-family: 'Faster One', cursive;
    }

    body{
        background-image: url("http://moziru.com/images/drawn-sleleton-human-skeleton-8.jpg"); 
        background-repeat: repeat; 
    }
    
    header p {
        background-color: gainsboro;
        border-style: solid;
    }
</style>

<body onload="resetGame();">

    <!--Begin the main content of the page -->
    <div id="content">
        <!-- The header section will repeat on all three HTML pages of the assignment -->
        <header>
            <div class="jumbotron">
                <div class="container">
                    <h1>Know Bones About It</h1>
                    <p>A Word Guessing Game: Human Anatomy Series</p>
                </div>
            </div>
        </header>
        <!-- End the header -->
        <div class="container" id="bodyContent">
            <div class="row">
                <div class="col-sm-6" id="infocontent">
                    <p>
                        The human skeleton is the internal framework of the body. It is composed of around 270 bones at birth â€“ this total decreases
                        to around 206 bones by adulthood after some bones get fused together. The bone mass in the skeleton
                        reaches maximum density around age 21. The human skeleton can be divided into the axial skeleton
                        and the appendicular skeleton. The axial skeleton is formed by the vertebral column, the rib cage,
                        the skull and other associated bones. The appendicular skeleton, which is attached to the axial skeleton,
                        is formed by the shoulder girdle, the pelvic girdle and the bones of the upper and lower limbs. The
                        human skeleton performs six major functions; support, movement, protection, production of blood cells,
                        storage of minerals, and endocrine regulation. The human skeleton is not as sexually dimorphic as
                        that of many other primate species, but subtle differences between sexes in the morphology of the
                        skull, dentition, long bones, and pelvis exist. In general, female skeletal elements tend to be smaller
                        and less robust than corresponding male elements within a given population. The human female pelvis
                        is also different from that of males in order to facilitate childbirth. Unlike most primates, human
                        males do not have penile bones.
                    </p>

                </div>
                <div class="col-sm-6" id="gamecontent">
                    <!--Make this pretty later with CSS 
                        Mock up what you want to be printed in this section.
                        Test to see if JS overides the default values-->
                    <h2 id="startMsg">
                        <strong>Press any letter to play.</strong>
                    </h2>
                    <p>
                        <strong>Wins</strong>
                    </p>
                    <h1 id="winCount"></h1>
                    <strong>Current Word</strong>
                    <h1 id="currentWord"></h1>
                    <strong>Number of Guesses Remaining</strong>
                    <h1 id="remainingChances"></h1>
                    <strong>Letters already guessed</strong>
                    <p>
                        <h1 id="usedLetters"></h1>

                </div>
            </div>
            <!--End the main content -->
        </div>
    </div>
    <script language="javascript"> 
                /*
                Main jscode will be here.
                This is a word guess game writting in HTML, CSS, JavaScript, and Bootstrap
                There will be several other variables that we need to declare.
                Variables that need to be declared.
                1) The will be an array of length ? of the bones I choose. Possible to make it an object to contain additional information about
                the bone.
                2) A listener, to start the game and know the state of each key press event.
                3) An input of what the user has entered. May be able to resuse the listener.
                4) An array to contain what letters the user already has entered.
                5) A counter to minus minus with each unsuccessful guess.
      
                Functions 
                1) One can include a check to see if the letter chosen is in the guess
                2) Function to re-write the puzzle section
                3) Function to pop the letters used 
                4) Function to minus the counter
                5) Function to move all to lower case
                6) Function to check if user input is a letter
                */

        // Global variables. Research objects. Maybe add additional information about the correct bone when the user wins?
        let wordBank = ["nasal", 
                        "lacrimal", 
                        "maxiallary", 
                        "zygomatic", 
                        "temporal", 
                        "palatine", 
                        "parietal", 
                        "femur", 
                        "malleus", 
                        "incus", 
                        "stapes", 
                        "tibia", 
                        "ulna",
                        "radius",
                        "humerus",
                        "mandible",B
                        "sacrum",
                        "phalanges",
                        "metacarpals",
                        "funny"];
        // My research shows that const is the best practice for the use of the maxTries letiable.
        const maxTries = 10;
        let guessedLetters = [];
        let currentWordIndex;
        let guessingWord = [];
        let remainingGuesses = 0;       // Lives
        let hasFinished = false;        // Flag    
        let wins = 0;                   // Set Wins to Zero

        // This function is needed upon start of the game and upon either meeting a Game Win or Game Lose condition
        function resetGame() {
            remainingGuesses = maxTries;
            document.getElementById("startMsg").innerText = "Press any letter to play.";
            currentWordIndex = Math.floor(Math.random() * (wordBank.length));
            guessedLetters = [];
            guessingWord = [];
            for (let i = 0; i < wordBank[currentWordIndex].length; i++) {
                guessingWord.push("_");
            }
            updateGameContent();
        };

        // This function is needed to send to the html the updates and status of where we are in the game instance.
        function updateGameContent() {

            document.getElementById("winCount").innerText = wins;
            let guessingWordText = "";
            for (let i = 0; i < guessingWord.length; i++) {
                guessingWordText += guessingWord[i];
            }

            console.log("CurrentWord:", guessingWordText);
            console.log("GuessingWord:", guessingWord);
            console.log("CurrentWordIndex:", currentWordIndex);
            console.log("Bone:", wordBank[currentWordIndex]);
            document.getElementById("currentWord").innerText = guessingWordText;
            document.getElementById("remainingChances").innerText = remainingGuesses;
            document.getElementById("usedLetters").innerText = guessedLetters;
        };
        
        // This function is called from within another function, letterPress(). It loops throught
        // the length of the word to test all instances of the existing letter in the wordbank[n].
        // I think this is the only way to say capture letters that repeat in the word such as the 'l' in malleus.
        function evaluateGuess(letter) {
            // Array to store strArray of letters in string
            let strArray = [];
            console.log("Current Word Index :", currentWordIndex);
            // Loop through word finding all instances of guessed letter, store value in an array.
            for (let i = 0; i < wordBank[currentWordIndex].length; i++) {
                if (wordBank[currentWordIndex][i] === letter) {
                    strArray.push(i);
                }
            }

            if (strArray.length <= 0) {
                remainingGuesses--;
            } else {
                for (let i = 0; i < strArray.length; i++) {
                    guessingWord[strArray[i]] = letter;
                }
            }
        };
        /*Following pair of functions are called firstly upon a keydown event and lastly after letter
          evaluation logic has completed*/
        function checkWin() {
            if (guessingWord.indexOf("_") === -1) {
                wins++;
                hasFinished = true;
                document.getElementById("startMsg").innerText = "Congratulations!";
            }
        }; 


        function checkLoss() {
            if (remainingGuesses <= 0) {
                hasFinished = true;
                document.getElementById("startMsg").innerText = "Sorry you lose!";
            }
        }

        // Makes a guess
        function letterPress(letter) {
            if (remainingGuesses > 0) {
                // Make sure we didn't use this letter yet
                if (guessedLetters.indexOf(letter) === -1) {
                    guessedLetters.push(letter);
                    evaluateGuess(letter);
                }
            }

        };

        // Event listener
        document.onkeydown = function (event) {
            // If we finished a game, dump one keystroke and reset.
            if (hasFinished) {
                resetGame();
                hasFinished = false;
            } else {
                // Check to make sure a-z was pressed.
                if (event.keyCode >= 65 && event.keyCode <= 90) {
                    letterPress(event.key.toLowerCase());
                    updateGameContent();
                    checkWin();
                    checkLoss();
                }
            }
        };    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
        crossorigin="anonymous"></script>

</body>

</html>